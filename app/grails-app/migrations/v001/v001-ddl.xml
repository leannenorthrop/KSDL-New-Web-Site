<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">
    <changeSet author="v001-schema-1" id="Leanne Northrop">
        <createTable tableName="address">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="post_code" type="VARCHAR(10)"/>
            <column name="place_name" type="${varchar-1024}"/>
            <column name="type" type="VARCHAR(5)"/>
            <column name="country" type="VARCHAR(108)"/>
            <column name="county" type="VARCHAR(25)"/>
            <column name="street_number" type="INT"/>
            <column name="line1" type="${varchar-2048}"/>
            <column name="post_town" type="VARCHAR(255)"/>
            <column name="line2" type="${varchar-2048}"/>
        </createTable>
    </changeSet>
    <changeSet author="v001-schema-2" id="Leanne Northrop">
        <createTable tableName="article">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="summary" type="${text-type}"/>
            <column name="image_id" type="BIGINT"/>
            <column name="content" type="${text-type}"/>
            <column name="title" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="v001-schema-3" id="Leanne Northrop">
        <createTable tableName="audit_log">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="property_name" type="VARCHAR(255)"/>
            <column name="last_updated" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="old_value" type="VARCHAR(255)"/>
            <column name="actor" type="VARCHAR(255)"/>
            <column name="uri" type="VARCHAR(255)"/>
            <column name="new_value" type="VARCHAR(255)"/>
            <column name="persisted_object_version" type="BIGINT"/>
            <column name="date_created" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="class_name" type="VARCHAR(255)"/>
            <column name="event_name" type="VARCHAR(255)"/>
            <column name="persisted_object_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="v001-schema-4" id="Leanne Northrop">
        <createTable tableName="contact">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="version" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="v001-schema-5" id="Leanne Northrop">
        <createTable tableName="email">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="address" type="VARCHAR(255)"/>
            <column name="type" type="VARCHAR(5)"/>
        </createTable>
    </changeSet>
    <changeSet author="v001-schema-6" id="Leanne Northrop">
        <createTable tableName="event">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="summary" type="${text-type}"/>
            <column name="title" type="VARCHAR(254)"/>
            <column name="leader_id" type="BIGINT"/>
            <column name="is_repeatable" type="BOOLEAN"/>
            <column name="organizer_id" type="BIGINT"/>
            <column name="image_id" type="BIGINT"/>
            <column name="venue_id" type="BIGINT"/>
            <column name="content" type="${text-type}"/>
        </createTable>
    </changeSet>
    <changeSet author="v001-schema-7" id="Leanne Northrop">
        <createTable tableName="image">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="version" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="thumbnail" type="${blob}">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="image" type="${blob}">
                <constraints nullable="false"/>
            </column>
            <column name="mime_type" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="v001-schema-51" id="Leanne Northrop">
        <createTable tableName="pending_email_confirmation">
            <column autoIncrement="true" name="ID" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="SYS_IDX_48"/>
            </column>
            <column name="version" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="timestamp" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="user_token" type="${varchar-500}"/>
            <column name="email_address" type="VARCHAR(80)">
                <constraints nullable="false"/>
            </column>
            <column name="confirmation_token" type="VARCHAR(80)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="v001-schema-8" id="Leanne Northrop">
        <createTable tableName="price">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="version" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="category" type="VARCHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="price" type="DOUBLE">
                <constraints nullable="false"/>
            </column>
            <column name="currency" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="class" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="event_id" type="BIGINT"/>
            <column name="prices_idx" type="INT"/>
        </createTable>
    </changeSet>
    <changeSet author="v001-schema-9" id="Leanne Northrop">
        <createTable tableName="publishable">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="version" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="display_date" type="BOOLEAN"/>
            <column name="home" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="date_published" type="DATETIME"/>
            <column name="display_author" type="BOOLEAN"/>
            <column name="last_updated" type="DATETIME"/>
            <column name="featured" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="deleted" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="author_id" type="BIGINT"/>
            <column name="category" type="VARCHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="publish_state" type="VARCHAR(21)">
                <constraints nullable="false"/>
            </column>
            <column name="date_created" type="DATETIME"/>
        </createTable>
    </changeSet>
    <changeSet author="v001-schema-10" id="Leanne Northrop">
        <createTable tableName="room">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="image_id" type="BIGINT"/>
            <column name="description" type="VARCHAR(255)"/>
            <column name="name" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="v001-schema-52" id="Leanne Northrop">
       <createTable tableName="schedule_rule">
           <column autoIncrement="true" name="ID" type="BIGINT">
               <constraints nullable="false" primaryKey="true" primaryKeyName="SYS_IDX_165"/>
           </column>
           <column name="version" type="BIGINT">
               <constraints nullable="false"/>
           </column>
           <column name="start_date" type="DATETIME">
               <constraints nullable="false"/>
           </column>
           <column name="interval" type="INT"/>
           <column name="end_date" type="DATETIME">
               <constraints nullable="false"/>
           </column>
           <column name="end_time" type="TIME">
               <constraints nullable="false"/>
           </column>
           <column name="modifier" type="VARCHAR(255)"/>
           <column name="start_time" type="TIME">
               <constraints nullable="false"/>
           </column>
           <column name="rule_type" type="VARCHAR(255)"/>
           <column name="duration" type="VARCHAR(255)"/>
           <column name="modifier_type" type="VARCHAR(2)"/>
           <column name="is_rule" type="BOOLEAN">
               <constraints nullable="false"/>
           </column>
           <column name="class" type="VARCHAR(255)">
               <constraints nullable="false"/>
           </column>
           <column name="event_id" type="BIGINT"/>
           <column name="dates_idx" type="INT"/>
       </createTable>
   </changeSet>
    <changeSet author="v001-schema-11" id="Leanne Northrop">
        <createTable tableName="shiro_role">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="version" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="v001-schema-12" id="Leanne Northrop">
        <createTable tableName="shiro_role_permissions">
            <column name="shiro_role_id" type="BIGINT"/>
            <column name="permissions_string" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="v001-schema-13" id="Leanne Northrop">
        <createTable tableName="shiro_user">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="version" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="username" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="password_hash" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="password_reset" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="v001-schema-14" id="Leanne Northrop">
        <createTable tableName="shiro_user_permissions">
            <column name="shiro_user_id" type="BIGINT"/>
            <column name="permissions_string" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="v001-schema-15" id="Leanne Northrop">
        <createTable tableName="shiro_user_roles">
            <column name="shiro_user_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="shiro_role_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="v001-schema-16" id="Leanne Northrop">
        <createTable tableName="tag_links">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="version" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="tag_ref" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="tag_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="type" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="v001-schema-17" id="Leanne Northrop">
        <createTable tableName="tags">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="version" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="v001-schema-18" id="Leanne Northrop">
        <createTable tableName="teacher">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="summary" type="${text-type}"/>
            <column name="image_id" type="BIGINT"/>
            <column name="type" type="VARCHAR(1)"/>
            <column name="content" type="${text-type}"/>
            <column name="title" type="VARCHAR(3)"/>
            <column name="name" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="v001-schema-19" id="Leanne Northrop">
        <createTable tableName="telephone">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="number" type="VARCHAR(255)"/>
            <column name="type" type="VARCHAR(6)"/>
        </createTable>
    </changeSet>
    <changeSet author="v001-schema-20" id="Leanne Northrop">
        <createTable tableName="transport">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="version" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="v001-schema-53" id="Leanne Northrop">
        <createTable tableName="venue">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="SYS_IDX_200"/>
            </column>
            <column name="image_id" type="BIGINT"/>
            <column name="access" type="VARCHAR(255)"/>
            <column name="description" type="VARCHAR(32000)"/>
            <column name="name" type="VARCHAR(512)"/>
            <column name="facilities" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="v001-schema-21" id="Leanne Northrop">
        <createTable tableName="venue_address">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="v001-schema-22" id="Leanne Northrop">
        <createTable tableName="venue_email">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="v001-schema-23" id="Leanne Northrop">
        <createTable tableName="venue_room">
            <column name="venue_rooms_id" type="BIGINT"/>
            <column name="room_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="v001-schema-24" id="Leanne Northrop">
        <createTable tableName="venue_telephone">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="v001-schema-25" id="Leanne Northrop">
        <addPrimaryKey columnNames="shiro_user_id, shiro_role_id" tableName="shiro_user_roles"/>
    </changeSet>
    <changeSet author="v001-schema-26" id="Leanne Northrop">
        <createIndex indexName="title" tableName="article" unique="true">
            <column name="title"/>
        </createIndex>
    </changeSet>
    <changeSet author="v001-schema-27" id="Leanne Northrop">
        <createIndex indexName="title" tableName="event" unique="true">
            <column name="title"/>
        </createIndex>
    </changeSet>
    <changeSet author="v001-schema-28" id="Leanne Northrop">
        <createIndex indexName="name" tableName="image" unique="true">
            <column name="name"/>
        </createIndex>
    </changeSet>
    <changeSet author="v001-schema-29" id="Leanne Northrop">
        <createIndex indexName="name" tableName="shiro_role" unique="true">
            <column name="name"/>
        </createIndex>
    </changeSet>
    <changeSet author="v001-schema-30" id="Leanne Northrop">
        <createIndex indexName="username" tableName="shiro_user" unique="true">
            <column name="username"/>
        </createIndex>
    </changeSet>
    <changeSet author="v001-schema-31" id="Leanne Northrop">
        <createIndex indexName="name" tableName="tags" unique="true">
            <column name="name"/>
        </createIndex>
    </changeSet>
    <changeSet author="v001-schema-32" id="Leanne Northrop">
        <createIndex indexName="name" tableName="teacher" unique="true">
            <column name="name"/>
        </createIndex>
    </changeSet>
    <changeSet author="v001-schema-33" id="Leanne Northrop">
        <addForeignKeyConstraint baseColumnNames="image_id" baseTableName="article" constraintName="FKD458CCF6B776D63" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="image"/>
    </changeSet>
    <changeSet author="v001-schema-34" id="Leanne Northrop">
        <addForeignKeyConstraint baseColumnNames="image_id" baseTableName="event" constraintName="FK5C6729AB776D63" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="image"/>
    </changeSet>
    <changeSet author="v001-schema-35" id="Leanne Northrop">
        <addForeignKeyConstraint baseColumnNames="leader_id" baseTableName="event" constraintName="FK5C6729A8D6FE8C1" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="teacher"/>
    </changeSet>
    <changeSet author="v001-schema-36" id="Leanne Northrop">
        <addForeignKeyConstraint baseColumnNames="organizer_id" baseTableName="event" constraintName="FK5C6729A7FAD865A" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="shiro_user"/>
    </changeSet>
    <changeSet author="v001-schema-37" id="Leanne Northrop">
        <addForeignKeyConstraint baseColumnNames="venue_id" baseTableName="event" constraintName="FK5C6729A7B3A8B2E" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="venue"/>
    </changeSet>
    <changeSet author="v001-schema-38" id="Leanne Northrop">
        <addForeignKeyConstraint baseColumnNames="event_id" baseTableName="price" constraintName="FK65FB149EF265472" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="event"/>
    </changeSet>
    <changeSet author="v001-schema-39" id="Leanne Northrop">
        <addForeignKeyConstraint baseColumnNames="author_id" baseTableName="publishable" constraintName="FKDB6312E991252A7E" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="shiro_user"/>
    </changeSet>
    <changeSet author="v001-schema-40" id="Leanne Northrop">
        <addForeignKeyConstraint baseColumnNames="image_id" baseTableName="room" constraintName="FK3580DBB776D63" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="image"/>
    </changeSet>
    <changeSet author="v001-schema-41" id="Leanne Northrop">
        <addForeignKeyConstraint baseColumnNames="event_id" baseTableName="schedule_rule" constraintName="FK6400C3A4EF265472" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="event"/>
    </changeSet>
    <changeSet author="v001-schema-42" id="Leanne Northrop">
        <addForeignKeyConstraint baseColumnNames="shiro_role_id" baseTableName="shiro_role_permissions" constraintName="FK389B46C981060810" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="shiro_role"/>
    </changeSet>
    <changeSet author="v001-schema-43" id="Leanne Northrop">
        <addForeignKeyConstraint baseColumnNames="shiro_user_id" baseTableName="shiro_user_permissions" constraintName="FK34555A9E2630CBF0" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="shiro_user"/>
    </changeSet>
    <changeSet author="v001-schema-44" id="Leanne Northrop">
        <addForeignKeyConstraint baseColumnNames="shiro_role_id" baseTableName="shiro_user_roles" constraintName="FKBA22105781060810" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="shiro_role"/>
    </changeSet>
    <changeSet author="v001-schema-45" id="Leanne Northrop">
        <addForeignKeyConstraint baseColumnNames="shiro_user_id" baseTableName="shiro_user_roles" constraintName="FKBA2210572630CBF0" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="shiro_user"/>
    </changeSet>
    <changeSet author="v001-schema-46" id="Leanne Northrop">
        <addForeignKeyConstraint baseColumnNames="tag_id" baseTableName="tag_links" constraintName="FK7C35D6D45A3B441D" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="tags"/>
    </changeSet>
    <changeSet author="v001-schema-47" id="Leanne Northrop">
        <addForeignKeyConstraint baseColumnNames="image_id" baseTableName="teacher" constraintName="FKAA31CBE2B776D63" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="image"/>
    </changeSet>
    <changeSet author="v001-schema-48" id="Leanne Northrop">
        <addForeignKeyConstraint baseColumnNames="image_id" baseTableName="venue" constraintName="FK6AE6A6FB776D63" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="image"/>
    </changeSet>
    <changeSet author="v001-schema-49" id="Leanne Northrop">
        <addForeignKeyConstraint baseColumnNames="room_id" baseTableName="venue_room" constraintName="FK9A9DFCAB7B485186" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="room"/>
    </changeSet>
    <changeSet author="v001-schema-50" id="Leanne Northrop">
        <addForeignKeyConstraint baseColumnNames="venue_rooms_id" baseTableName="venue_room" constraintName="FK9A9DFCABE524B5D5" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="venue"/>
    </changeSet>
</databaseChangeLog>
